{% extends "_master.html" %}

{% block content %}

<div>
  <h2 class="post-title">
      {{ post.post_title }}
  </h2>
</div>
{% if post.post_author == user.user_name %}

<form action="\delete" method="post">
    <input type="hidden" value="{{ post.key.id() }}" name="postid">
    <div >
        <a class = "edit" href="/editpost/{{ post.key.id() }}">Edit Post</a>
        <br>
        <input type="submit" value="Delete">
    </div>
</form>

{% else %}
{% if user %}
<div class="edit">
    <a href="/addlike/{{ post.key.id() }}" class="edit">{{ like }}</a>
</div>
{% endif %}
{% endif %}
<div>
  <p>
      {{ post.post_content | safe}}
  </p>
</div>

<div>
  <h5>
      Created: {{ post.post_created.strftime("%b %d, %Y") }}
  </h5>
</div>
<div>
    <h5 class="sub">
        Author: {{ post.post_author }}
    </h5>
</div>

{% for c in comments %}

<div>
  <h5>
      Author: {{ c.comment_author }} <br />
      {{ c.comment_created.strftime("%b %d, %Y  %H:%M") }}
  </h5>
</div>
<div>
  <p>
      {{ c.comment_text }}
  </p>
</div>
{% if c.comment_author == user.user_name %}
<div>
  <form action="/deletecomment" method="post">
      <input type="hidden" value="{{ c.key.id() }}" name="comment_id" />
      <input type="submit" class="btn btn-danger" value="Delete">
  </form>
</div>
{% endif %}
</div>
{% endfor %}
{% if user %}

<div>
  <form method="post" action="\addcomment">
    <div>
        <input type="hidden" value="{{ post.key.id() }}" name="post_id" />
        <label for="content">comment:</label>
        <textarea name="content" class="form-control" placeholder="comment" id="content"></textarea>
    </div>

    <div>
        <input type="submit" class="btn btn-primary" value="Submit">
    </div>

  </form>
</div>

{% endif %}
{% endblock %}

{% block script %}
<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.15.0/jquery.validate.min.js"></script>
<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.15.0/additional-methods.min.js"></script>
<script src="../static/js/addcomment.js" type="text/javascript"></script>
{% endblock %}
